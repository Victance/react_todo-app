(this["webpackJsonpreact_todo-app"]=this["webpackJsonpreact_todo-app"]||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var c=n(12),a=n.n(c),o=(n(18),n(19),n(20),n(0)),r=n(7),s=n(2),i=n(6),l=n(13),u=n(5),d=n(4),j=n.n(d),p="https://mate.academy/students-api",h=function(){return fetch("".concat(p,"/todos?userId=30")).then((function(e){return e.json()}))},f=function(e){return fetch("".concat(p,"/todos/").concat(e),{method:"DELETE"})},b=function(e,t){return fetch(e,{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then((function(e){return e.json()}))},m=function(e,t){return b("".concat(p,"/todos/").concat(e),{completed:t})},O=n(10),x=n.n(O),v=n(1),y=function(e){return x()({selected:e.isActive})},g=function(e){var t=e.itemsLeft,n=e.todos,c=e.setTodos,a=function(){var e=Object(i.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.filter((function(e){return e.completed})).map((function(e){return f(e.id)})));case 2:h().then(c);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("footer",{className:"footer",children:[Object(v.jsx)("span",{className:"todo-count","data-cy":"todosCounter",children:"".concat(t," ").concat(1===t?"item":"items"," left")}),Object(v.jsxs)("ul",{className:"filters",children:[Object(v.jsx)("li",{children:Object(v.jsx)(r.b,{to:"/",className:y,children:"All"})}),Object(v.jsx)("li",{children:Object(v.jsx)(r.b,{to:"/active",className:y,children:"Active"})}),Object(v.jsx)("li",{children:Object(v.jsx)(r.b,{to:"/completed",className:y,children:"Completed"})})]}),t<n.length&&Object(v.jsx)("button",{type:"button",className:"clear-completed",onClick:a,children:"Clear completed"})]})},k=function(e){var t=e.todo,n=e.setTodos,c=Object(o.useState)(!1),a=Object(u.a)(c,2),r=a[0],s=a[1],l=Object(o.useState)(""),d=Object(u.a)(l,2),O=d[0],y=d[1];Object(o.useEffect)((function(){y(t.title)}),[]);var g=function(){var e=Object(i.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t.id);case 2:h().then(n);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t.id,!t.completed);case 2:h().then(n);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e,c;O.length||g(),s(!1),e=t.id,c=O,b("".concat(p,"/todos/").concat(e),{title:c}),h().then(n)};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("li",{className:x()({completed:t.completed,editing:r}),children:r?Object(v.jsx)("input",{type:"text",className:"edit",value:O,autoFocus:!0,onBlur:function(){s(!1),t.title!==O&&N()},onKeyDown:function(e){"Enter"===e.key&&O===t.title&&s(!1),"Enter"===e.key&&N(),"Escape"===e.key&&(s(!1),y(t.title))},onChange:function(e){y(e.target.value)}}):Object(v.jsxs)("div",{className:"view",children:[Object(v.jsx)("input",{type:"checkbox",className:"toggle",checked:t.completed,id:"".concat(t.id),onChange:k}),Object(v.jsx)("label",{role:"presentation",onClick:function(){s(!0)},children:O}),Object(v.jsx)("button",{type:"button",className:"destroy","data-cy":"deleteTodo",onClick:g})]})})})},N=function(e){var t=e.todos,n=e.setTodos,c=e.itemsLeft,a=function(){var e=Object(i.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==c&&c!==t.length){e.next=3;break}return e.next=3,Promise.all(t.map((function(e){return m(e.id,!e.completed)})));case 3:if(!(c<t.length)){e.next=6;break}return e.next=6,Promise.all(t.filter((function(e){return!e.completed})).map((function(e){return m(e.id,!e.completed)})));case 6:h().then(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("section",{className:"main",children:[Object(v.jsx)("input",{type:"checkbox",id:"toggle-all",className:"toggle-all","data-cy":"toggleAll",checked:0===c,onChange:a}),Object(v.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"}),Object(v.jsx)("ul",{className:"todo-list","data-cy":"todoList",children:t.map((function(e){return Object(v.jsx)(k,{todo:e,setTodos:n},e.id)}))})]})},w=function(){var e=Object(o.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(o.useState)([]),r=Object(u.a)(a,2),d=r[0],f=r[1],b=Object(s.f)().pathname;Object(o.useEffect)((function(){h().then(f)}),[]);var m,O=function(){var e=Object(i.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.length){e.next=3;break}return e.abrupt("return");case 3:return a={title:n,id:Math.max.apply(Math,Object(l.a)(d.map((function(e){return e.id}))))+1,userId:30,completed:!1},e.next=6,o=a,fetch("".concat(p,"/todos"),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(o)}).then((function(e){return e.json()}));case 6:h().then(f),c("");case 8:case"end":return e.stop()}var o}),e)})));return function(t){return e.apply(this,arguments)}}(),x=d.filter((function(e){return!e.completed})).length;switch(b){case"/active":m=d.filter((function(e){return!e.completed}));break;case"/completed":m=d.filter((function(e){return e.completed}));break;default:m=d}return Object(v.jsxs)("div",{className:"todoapp",children:[d.length>0&&Object(v.jsx)(g,{todos:m,itemsLeft:x,setTodos:f}),Object(v.jsxs)("header",{className:"header",children:[Object(v.jsx)("h1",{children:"To-Dos"}),Object(v.jsx)("form",{onSubmit:O,children:Object(v.jsx)("input",{type:"text","data-cy":"createTodo",className:"new-todo",placeholder:"What needs to be done?",value:n,onChange:function(e){c(e.target.value)}})})]}),Object(v.jsx)(N,{todos:m,setTodos:f,itemsLeft:x})]})},T=function(){return Object(v.jsx)(r.a,{children:Object(v.jsxs)(s.d,{children:[Object(v.jsxs)(s.b,{path:"/",element:Object(v.jsx)(w,{}),children:[Object(v.jsx)(s.b,{path:":active",element:Object(v.jsx)(w,{})}),Object(v.jsx)(s.b,{path:":completed",element:Object(v.jsx)(w,{})})]}),Object(v.jsx)(s.b,{path:"/home",element:Object(v.jsx)(s.a,{to:"/",replace:!0})}),Object(v.jsx)(s.b,{path:"*",element:Object(v.jsx)("h1",{children:"Page not found"})})]})})};a.a.render(Object(v.jsx)(T,{}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.f74ea840.chunk.js.map