(this["webpackJsonpreact_todo-app"]=this["webpackJsonpreact_todo-app"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var c=n(8),r=n.n(c),o=(n(15),n(16),n(17),n(2)),a=n(3),s=n(10),i=n(4),u=n(1),l=n.n(u),d="https://mate.academy/students-api",f=function(){return fetch("".concat(d,"/todos?userId=30")).then((function(e){return e.json()}))},p=function(e){return fetch("".concat(d,"/todos/").concat(e),{method:"DELETE"})},j=function(e,t){return fetch(e,{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then((function(e){return e.json()}))},h=function(e,t){return j("".concat(d,"/todos/").concat(e),{completed:t})},b=n(0),m=function(e){var t=e.itemsLeft,n=e.todos,c=e.setTodos,r=function(){var e=Object(a.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.filter((function(e){return e.completed})).map((function(e){return p(e.id)})));case 2:f().then(c);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("footer",{className:"footer",children:[Object(b.jsx)("span",{className:"todo-count","data-cy":"todosCounter",children:"".concat(t," items left")}),Object(b.jsxs)("ul",{className:"filters",children:[Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:"#/",className:"selected",children:"All"})}),Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:"#/active",children:"Active"})}),Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:"#/completed",children:"Completed"})})]}),t<n.length&&Object(b.jsx)("button",{type:"button",className:"clear-completed",onClick:r,children:"Clear completed"})]})},x=n(9),O=n.n(x),v=function(e){var t=e.todo,n=e.setTodos,c=Object(o.useState)(!1),r=Object(i.a)(c,2),s=r[0],u=r[1],m=Object(o.useState)(""),x=Object(i.a)(m,2),v=x[0],y=x[1];Object(o.useEffect)((function(){y(t.title)}),[]);var g=function(){var e=Object(a.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t.id);case 2:f().then(n);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(a.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t.id,!t.completed);case 2:f().then(n);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(a.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.length||g(),u(!1),c=t.id,r=v,j("".concat(d,"/todos/").concat(c),{title:r}),f().then(n);case 4:case"end":return e.stop()}var c,r}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("li",{className:O()({completed:t.completed,editing:s}),children:s?Object(b.jsx)("input",{type:"text",className:"edit",value:v,autoFocus:!0,onBlur:function(){u(!1),t.title!==v&&N()},onKeyDown:function(e){"Enter"===e.key&&t.title===v&&u(!1),"Enter"===e.key&&N()},onChange:function(e){y(e.target.value)}}):Object(b.jsxs)("div",{className:"view",children:[Object(b.jsx)("input",{type:"checkbox",className:"toggle",checked:t.completed,id:"".concat(t.id),onChange:k}),Object(b.jsx)("label",{role:"presentation",onClick:function(){u(!0)},children:v}),Object(b.jsx)("button",{type:"button",className:"destroy","data-cy":"deleteTodo",onClick:g})]})})})},y=function(e){var t=e.todos,n=e.setTodos,c=e.itemsLeft,r=function(){var e=Object(a.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==c&&c!==t.length){e.next=3;break}return e.next=3,Promise.all(t.map((function(e){return h(e.id,!e.completed)})));case 3:if(!(c<t.length)){e.next=6;break}return e.next=6,Promise.all(t.filter((function(e){return!e.completed})).map((function(e){return h(e.id,!e.completed)})));case 6:f().then(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("section",{className:"main",children:[Object(b.jsx)("input",{type:"checkbox",id:"toggle-all",className:"toggle-all","data-cy":"toggleAll",checked:c>0,onChange:r}),Object(b.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"}),Object(b.jsx)("ul",{className:"todo-list","data-cy":"todoList",children:t.map((function(e){return Object(b.jsx)(v,{todo:e,setTodos:n},e.id)}))})]})},g=function(){var e=Object(o.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(o.useState)([]),u=Object(i.a)(r,2),p=u[0],j=u[1];Object(o.useEffect)((function(){f().then(j)}),[]);var h=function(){var e=Object(a.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.length){e.next=3;break}return e.abrupt("return");case 3:return r={title:n,id:Math.max.apply(Math,Object(s.a)(p.map((function(e){return e.id}))))+1,userId:30,completed:!1},e.next=6,o=r,fetch("".concat(d,"/todos"),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(o)}).then((function(e){return e.json()}));case 6:f().then(j),c("");case 8:case"end":return e.stop()}var o}),e)})));return function(t){return e.apply(this,arguments)}}(),x=p.filter((function(e){return!e.completed})).length;return Object(b.jsxs)("div",{className:"todoapp",children:[Object(b.jsxs)("header",{className:"header",children:[Object(b.jsx)("h1",{children:"To-Dos"}),Object(b.jsx)("form",{onSubmit:h,children:Object(b.jsx)("input",{type:"text","data-cy":"createTodo",className:"new-todo",placeholder:"What needs to be done?",value:n,onChange:function(e){c(e.target.value)}})})]}),Object(b.jsx)(y,{todos:p,setTodos:j,itemsLeft:x}),Object(b.jsx)(m,{todos:p,itemsLeft:x,setTodos:j})]})},k=function(){return Object(b.jsx)(g,{})};r.a.render(Object(b.jsx)(k,{}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.b06607e7.chunk.js.map